<mat-card>
  <form [formGroup]="emissionsForm" (ngSubmit)="onSubmit()">
    <mat-form-field appearance="fill">
      <mat-label>Periodo factura</mat-label>
      <mat-select formControlName="periodoFactura">
          <mat-option value="M01" aria-label="Enero">{{"january" | translate}}</mat-option>
          <mat-option value="M02" aria-label="Febrero">{{"february" | translate}}</mat-option>
          <mat-option value="M03" aria-label="Marzo">{{"march" | translate}}</mat-option>
          <mat-option value="M04" aria-label="Abril">{{"april" | translate}}</mat-option>
          <mat-option value="M05" aria-label="Mayo">{{"may" | translate}}</mat-option>
          <mat-option value="M06" aria-label="Junio">{{"june" | translate}}</mat-option>
          <mat-option value="M07" aria-label="Julio">{{"july" | translate}}</mat-option>
          <mat-option value="M08" aria-label="Agosto">{{"august" | translate}}</mat-option>
          <mat-option value="M09" aria-label="Setiembre">{{"september" | translate}}</mat-option>
          <mat-option value="M10" aria-label="Octubre">{{"october" | translate}}</mat-option>
          <mat-option value="M11" aria-label="Noviembre">{{"november" | translate}}</mat-option>
          <mat-option value="M12" aria-label="Diciembre">{{"december" | translate}}</mat-option>
      </mat-select>
    </mat-form-field>
      <section ngClass="type-fuel-quantity">
        <!-- Tipo de maquinaria -->
        <mat-form-field appearance="fill">
          <mat-label>Tipo de maquinaria</mat-label>
          <mat-select formControlName="equipmentType" (selectionChange)="onMachineryChange($event.value)">
            <mat-option value="Agrícola">Maquinaria agrícola</mat-option>
            <mat-option value="Forestal">Maquinaria forestal</mat-option>
            <mat-option value="Comercial, institucional e industrial">Maquinaria comercial, institucional e industrial</mat-option>
          </mat-select>
        </mat-form-field>
  
        <!-- Tipo de Combustible o lubricante -->
        <mat-form-field appearance="fill">
          <mat-label>Combustible o lubricante</mat-label>
          <mat-select formControlName="fuelType"  (selectionChange)="setEmissionFactors()">
            <mat-option *ngFor="let fuelEmis of fuelEmisTypes" [value]="fuelEmis">{{ fuelEmis.FuelType }}</mat-option>
          </mat-select>
        </mat-form-field>
  
        <!-- Cantidad (ud) -->
        <mat-form-field appearance="fill">
          <mat-label>Cantidad (ud)</mat-label>
          <input matInput type="number" formControlName="activityData" (input)="onActivityDataChange()" />
        </mat-form-field>
      </section>

      <!-- Factores de emisión por defecto -->
      <h3>Factores de Emisión por gases</h3>
      <section formGroupName="defaultEmissionFactor" class="factor-group">
        <mat-form-field appearance="fill">
          <mat-label>kg CO₂/ud</mat-label>
          <input matInput formControlName="co2" ngClass="gas-emission"/>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>g CH₄/ud</mat-label>
          <input matInput formControlName="ch4" ngClass="gas-emission"/>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>g N₂O/ud</mat-label>
          <input matInput formControlName="n2o" ngClass="gas-emission"/>
        </mat-form-field>
      </section>
  
      <!-- Emisiones parciales -->
      <h3>Emisiones Parciales</h3>
      <section formGroupName="partialEmissions" class="emissions-group">
        <mat-form-field appearance="fill">
          <mat-label>kg CO₂</mat-label>
          <input matInput formControlName="co2"  ngClass="gas-emission"/>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>g CH₄</mat-label>
          <input matInput formControlName="ch4"  ngClass="gas-emission"/>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>g N₂O</mat-label>
          <input matInput formControlName="n2o"  ngClass="gas-emission"/>
        </mat-form-field>
      </section>
  
      <!-- Emisiones totales -->
      <h3>Emisiones Totales (tnCO<sub>2</sub>eq) [CO<sub>2</sub>eq: CO<sub>2</sub>+CH<sub>4</sub>+N<sub>2</sub>O]</h3>
      <mat-form-field>
        <mat-label>(tnCO<sub>2</sub>eq)</mat-label>
        <input matInput formControlName="totalEmissions"  ngClass="gas-emission tnCo2eq" />
      </mat-form-field>
      <button mat-raised-button color="accent" type="submit" [disabled]="!emissionsForm.valid">Registrar</button>
  </form>
  <app-data-table [displayedColumns]="displayedColumns" [dataSource]="dataSource"></app-data-table>
</mat-card>
