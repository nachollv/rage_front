<form [formGroup]="emissionForm" (ngSubmit)="onSubmit()" class="form-container">
  <mat-form-field appearance="outline">
    <mat-label>Combustible</mat-label>
    <input matInput formControlName="Combustible" placeholder="Ejemplo: Gasolina">
    <mat-error *ngIf="emissionForm.get('Combustible')?.invalid && emissionForm.get('Combustible')?.touched">
      Combustible es obligatorio.
    </mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Año</mat-label>
    <input matInput formControlName="year" type="number" placeholder="Ejemplo: 2025">
    <mat-error *ngIf="emissionForm.get('year')?.invalid && emissionForm.get('year')?.touched">
      Año debe ser un número válido de 4 dígitos.
    </mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>CO2 (kg/ud)</mat-label>
    <input matInput formControlName="CO2_kg_ud" type="number" step="0.01">
    <mat-error *ngIf="emissionForm.get('CO2_kg_ud')?.invalid && emissionForm.get('CO2_kg_ud')?.touched">
      CO2 debe ser un número positivo.
    </mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>CH4 (g/ud)</mat-label>
    <input matInput formControlName="CH4_g_ud" type="number" step="0.01">
    <mat-error *ngIf="emissionForm.get('CH4_g_ud')?.invalid && emissionForm.get('CH4_g_ud')?.touched">
      CH4 debe ser un número positivo.
    </mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>N2O (g/ud)</mat-label>
    <input matInput formControlName="N2O_g_ud" type="number" step="0.01">
    <mat-error *ngIf="emissionForm.get('N2O_g_ud')?.invalid && emissionForm.get('N2O_g_ud')?.touched">
      N2O debe ser un número positivo.
    </mat-error>
  </mat-form-field>

  <div *ngIf="emissionForm.invalid && emissionForm.touched" class="error-message">
    <p>El formulario contiene errores, por favor verifica los campos.</p>
  </div>

  <button mat-raised-button color="primary" type="submit" [disabled]="emissionForm.invalid">Registrar</button>
</form>

<p>Estado del formulario: {{ emissionForm.valid ? 'Válido' : 'Inválido' }}</p>

<app-data-table [displayedColumns]="displayedColumns" [dataSource]="dataSource"></app-data-table>
